<div class="menu-container">
  @if (verificar()) {
    <mat-toolbar class="custom-toolbar">
      <!-- HOME -->
      <button mat-button [routerLink]="['/homes']" class="btn-nav brand-btn">
        <mat-icon>home</mat-icon>
        <span class="brand-title">Inmovision</span>
      </button>

      <!-- GESTIÓN (solo admin si quieres) -->
      @if (isAdmin()) {
        <button
          mat-button
          class="btn-nav"
          aria-label="Gestión Inmovision"
          [matMenuTriggerFor]="menuGestion"
        >
          <mat-icon>menu</mat-icon>
          <span>Gestión</span>
        </button>
      }

      <!-- REPORTES (puede ser admin/tester, ajusta como quieras) -->
      @if (isAdmin() || isTester()) {
        <button
          mat-button
          class="btn-nav"
          aria-label="Reportes Inmovision"
          [matMenuTriggerFor]="menuReportes"
        >
          <mat-icon>bar_chart</mat-icon>
          <span>Reportes</span>
        </button>
      }

      <span class="spacer"></span>

      <!-- USUARIO / ROL -->
      <button
        mat-button
        class="btn-nav user-btn"
        [matMenuTriggerFor]="menuUsuario"
      >
        <mat-icon>person</mat-icon>
        <span>{{ usuario || 'Usuario' }}</span>
      </button>
    </mat-toolbar>
  }

  <!-- MENÚ GESTIÓN -->
  <mat-menu #menuGestion="matMenu">
    <button mat-menu-item routerLink="/distritos">
      <mat-icon>location_city</mat-icon>
      <span>Distritos</span>
    </button>
    <button mat-menu-item routerLink="/usuarios">
      <mat-icon>group</mat-icon>
      <span>Usuarios</span>
    </button>
    <button mat-menu-item routerLink="/roles">
      <mat-icon>verified_user</mat-icon>
      <span>Roles</span>
    </button>
    <button mat-menu-item routerLink="/propiedades">
      <mat-icon>home_work</mat-icon>
      <span>Propiedades</span>
    </button>
    <button mat-menu-item routerLink="/mensajes">
      <mat-icon>mail</mat-icon>
      <span>Mensajes</span>
    </button>
    <button mat-menu-item routerLink="/visitas">
      <mat-icon>event</mat-icon>
      <span>Visitas</span>
    </button>
    <button mat-menu-item routerLink="/calificaciones">
      <mat-icon>star_rate</mat-icon>
      <span>Calificaciones</span>
    </button>
    <button mat-menu-item routerLink="/contratos">
      <mat-icon>description</mat-icon>
      <span>Contratos</span>
    </button>
    <button mat-menu-item routerLink="/favoritos">
      <mat-icon>favorite</mat-icon>
      <span>Favoritos</span>
    </button>
    <button mat-menu-item routerLink="/listas-favoritos">
      <mat-icon>list</mat-icon>
      <span>Lista favoritos</span>
    </button>
    <button mat-menu-item routerLink="/recomendaciones">
      <mat-icon>thumb_up</mat-icon>
      <span>Recomendaciones</span>
    </button>
    <button mat-menu-item routerLink="/comparaciones">
      <mat-icon>compare</mat-icon>
      <span>Comparaciones</span>
    </button>
    <button mat-menu-item routerLink="/pagos">
      <mat-icon>payments</mat-icon>
      <span>Pagos</span>
    </button>
    <button mat-menu-item routerLink="/simulacion-de-precios">
      <mat-icon>calculate</mat-icon>
      <span>Simulaciones de precios</span>
    </button>
  </mat-menu>

  <!-- MENÚ REPORTES (aquí agregas todos tus reportes de queries) -->
  <mat-menu #menuReportes="matMenu">
    <button mat-menu-item routerLink="/reportecalificaciones">
      <mat-icon>bar_chart</mat-icon>
      <span>Rep. calificaciones</span>
    </button>
    <!-- Ejemplos de otros reportes:
    <button mat-menu-item routerLink="/reporte-contratos">
      <mat-icon>insert_chart</mat-icon>
      <span>Rep. contratos</span>
    </button>
    <button mat-menu-item routerLink="/reporte-pagos">
      <mat-icon>stacked_bar_chart</mat-icon>
      <span>Rep. pagos</span>
    </button>
    -->
  </mat-menu>

  <!-- MENÚ USUARIO -->
  <mat-menu #menuUsuario="matMenu">
    <button mat-menu-item disabled>
      <mat-icon>badge</mat-icon>
      <span>Rol: {{ role || 'Sin rol' }}</span>
    </button>
    <button mat-menu-item routerLink="/login" (click)="cerrar()">
      <mat-icon>logout</mat-icon>
      <span>Cerrar sesión</span>
    </button>
  </mat-menu>
</div>
