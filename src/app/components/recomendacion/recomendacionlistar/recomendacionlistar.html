<!-- recomendacion-listar.html -->

<div class="reco-list-wrapper">
  <div class="reco-list-card">
    <!-- HEADER -->
    <header class="reco-list-header">
      <div class="reco-list-header-left">
        <div class="reco-list-icon">
          <mat-icon>thumb_up</mat-icon>
        </div>
        <div>
          <h2 class="reco-list-title">Lista de recomendaciones</h2>
          <p class="reco-list-subtitle">
            Visualiza, edita o elimina las recomendaciones realizadas por los usuarios sobre las propiedades.
          </p>
        </div>
      </div>

      <div class="reco-list-header-right">
        <button
          mat-flat-button
          color="primary"
          routerLink="/recomendaciones/nuevo"
        >
          <mat-icon>add</mat-icon>
          <span>Nueva recomendación</span>
        </button>
      </div>
    </header>

    <!-- TABLA -->
    <section class="reco-table-container">
      <table
        mat-table
        [dataSource]="dataSource"
        class="mat-elevation-z2 reco-table"
      >
        <!-- ID -->
        <ng-container matColumnDef="c1">
          <th mat-header-cell *matHeaderCellDef> # </th>
          <td mat-cell *matCellDef="let element">
            {{ element.idRecomendacion }}
          </td>
        </ng-container>

        <!-- Motivo -->
        <ng-container matColumnDef="c2">
          <th mat-header-cell *matHeaderCellDef> Motivo </th>
          <td mat-cell *matCellDef="let element">
            <div class="reco-motivo">
              {{ element.motivo }}
            </div>
          </td>
        </ng-container>

        <!-- Fecha -->
        <ng-container matColumnDef="c3">
          <th mat-header-cell *matHeaderCellDef> Fecha </th>
          <td mat-cell *matCellDef="let element">
            {{ element.fecha | date:'dd/MM/yyyy' }}
          </td>
        </ng-container>

        <!-- Usuario -->
        <ng-container matColumnDef="c4">
          <th mat-header-cell *matHeaderCellDef> Usuario </th>
          <td mat-cell *matCellDef="let element">
            <span class="reco-chip user-chip">
              {{ element.usuario.nombre }} {{ element.usuario.apellido }}
            </span>
          </td>
        </ng-container>

        <!-- Propiedad -->
        <ng-container matColumnDef="c5">
          <th mat-header-cell *matHeaderCellDef> Propiedad </th>
          <td mat-cell *matCellDef="let element">
            <span class="reco-chip property-chip">
              {{ element.propiedad.titulo }}
            </span>
          </td>
        </ng-container>

        <!-- Editar -->
        <ng-container matColumnDef="c6">
          <th mat-header-cell *matHeaderCellDef> Editar </th>
          <td mat-cell *matCellDef="let element">
            <button
              mat-icon-button
              color="primary"
              [routerLink]="['/recomendaciones/edits', element.idRecomendacion]"
              aria-label="Editar recomendación"
            >
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- Eliminar -->
        <ng-container matColumnDef="c7">
          <th mat-header-cell *matHeaderCellDef> Eliminar </th>
          <td mat-cell *matCellDef="let element">
            <button
              mat-icon-button
              color="warn"
              (click)="eliminar(element.idRecomendacion)"
              aria-label="Eliminar recomendación"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- Filas -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns"
          class="reco-row-hover"
        ></tr>
      </table>
    </section>
  </div>
</div>
