<div class="card-container">
  <div class="card">
    <h2 class="title">
      {{ edicion ? 'Editar Propiedad' : 'Registrar Propiedad' }}
    </h2>

    <form [formGroup]="form" (ngSubmit)="aceptar()" class="grid">
      <!-- IZQUIERDA -->
      <div class="col">
        <mat-form-field appearance="fill" class="small">
          <mat-label>T칤tulo</mat-label>
          <input matInput formControlName="titulo" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Descripci칩n</mat-label>
          <textarea matInput rows="2" formControlName="descripcion"></textarea>
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Precio</mat-label>
          <input matInput type="number" formControlName="precio" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Tipo</mat-label>
          <mat-select formControlName="tipo">
            <mat-option value="Casa">Casa</mat-option>
            <mat-option value="Departamento">Departamento</mat-option>
            <mat-option value="Terreno">Terreno</mat-option>
            <mat-option value="Local">Local</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Categor칤a</mat-label>
          <mat-select formControlName="categoria">
            <mat-option value="Venta">Venta</mat-option>
            <mat-option value="Alquiler">Alquiler</mat-option>
            <mat-option value="Proyecto">Proyecto</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- DERECHA -->
      <div class="col">
        <mat-form-field appearance="fill" class="small">
          <mat-label>Direcci칩n</mat-label>
          <input matInput formControlName="direccion" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Estado</mat-label>
          <mat-select formControlName="estado">
            <mat-option value="Disponible">Disponible</mat-option>
            <mat-option value="No disponible">No disponible</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Fecha publicaci칩n</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="fechaPublicacion" />
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Metros cuadrados</mat-label>
          <input matInput type="number" formControlName="metrosCuadrados" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Habitaciones</mat-label>
          <input matInput type="number" formControlName="habitaciones" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Ba침os</mat-label>
          <input matInput type="number" formControlName="banos" />
        </mat-form-field>

        <!-- DESTACADA -->
        <mat-slide-toggle formControlName="destacada" color="primary"> Destacada </mat-slide-toggle>
      </div>

      <!-- FILA FULL -->
      <div class="col-full">
        <mat-form-field appearance="fill" class="small">
          <mat-label>Latitud</mat-label>
          <input matInput type="number" formControlName="latitud" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Longitud</mat-label>
          <input matInput type="number" formControlName="longitud" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>URL VR</mat-label>
          <input matInput formControlName="urlVr" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Notas</mat-label>
          <textarea matInput rows="2" formControlName="notas"></textarea>
        </mat-form-field>
      </div>

      <!-- USUARIO / DISTRITO -->
      <div class="col-full">
        <mat-form-field appearance="fill" class="small">
          <mat-label>Usuario</mat-label>
          <mat-select formControlName="usuario">
            <mat-option *ngFor="let u of listaUsuarios" [value]="u.idUser">
              {{ u.nombre }} {{ u.apellido }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="small">
          <mat-label>Distrito</mat-label>
          <mat-select formControlName="distrito">
            <mat-option *ngFor="let d of listaDistritos" [value]="d.idDistrito">
              {{ d.nombreDistrito }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- IM츼GENES -->
      <div class="col-full">
        <span class="subtitle">Im치genes</span>

        <!-- BOT칍N ESTILIZADO -->
        <label class="btn-upload">
          <input type="file" multiple (change)="onFileSelected($event)" />
          游늬 Elegir archivos
        </label>

        <div class="preview-row">
          <div class="preview-card" *ngFor="let img of previewImages">
            <img [src]="img" />
          </div>
        </div>
      </div>

      

      <!-- BOTONES -->
      <div class="actions">
        <button mat-raised-button color="primary" type="submit">
          {{ edicion ? 'Actualizar' : 'Registrar' }}
        </button>

        <button mat-raised-button color="warn" type="button" (click)="cancelar()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
